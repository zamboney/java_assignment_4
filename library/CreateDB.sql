CREATE TABLE PERMISSIONS (
	ID INTEGER NOT NULL,
	"NAME" VARCHAR(20), 
	PRIMARY KEY (ID)
);

INSERT INTO APP.PERMISSIONS (ID, "NAME") 
	VALUES (1, 'READ');
INSERT INTO APP.PERMISSIONS (ID, "NAME") 
	VALUES (2, 'RENT');
INSERT INTO APP.PERMISSIONS (ID, "NAME") 
	VALUES (3, 'ADMIN');

CREATE TABLE USERS (
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
	FNAME VARCHAR(20) NOT NULL, 
	LNAME VARCHAR(20) NOT NULL, 
	PREMISSION_ID INTEGER DEFAULT 1  NOT NULL REFERENCES PERMISSIONS(ID), 
	PENALTY DOUBLE DEFAULT 0  NOT NULL, 
	PASSWORD VARCHAR(20) DEFAULT '123456'  NOT NULL, 
	USER_NAME VARCHAR(20) NOT NULL UNIQUE, 
	PRIMARY KEY (ID)
);

INSERT INTO APP.USERS (FNAME, LNAME, PREMISSION_ID, PENALTY, PASSWORD, USER_NAME) 
	VALUES ('admin', 'admin', 3, DEFAULT, '123456', 'admin')

CREATE TABLE GENRES (
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
	"NAME" VARCHAR(20) NOT NULL,
	PRIMARY KEY (ID)
);
INSERT INTO APP.GENRES ("NAME") 
	VALUES ('LAW');
INSERT INTO APP.GENRES ("NAME") 
	VALUES ('COMPUTER SCIENCE');

CREATE TABLE CONDITIONS (
	ID INTEGER NOT NULL, 
	"NAME" VARCHAR(20) NOT NULL, 
	PRIMARY KEY (ID)
);

INSERT INTO APP.CONDITIONS (ID,"NAME") 
	VALUES (3,'NOT IN USE');
INSERT INTO APP.CONDITIONS (ID,"NAME") 
	VALUES (2,'BAD');
INSERT INTO APP.CONDITIONS (ID,"NAME") 
	VALUES (1,'GOOD');

CREATE TABLE BOOKS (
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),  
	"NAME" VARCHAR(20), 
	AUTHOR VARCHAR(20), 
	CONDITION_ID INTEGER NOT NULL REFERENCES CONDITIONS(ID),
	GENRE_ID INTEGER NOT NULL REFERENCES GENRES(ID),
	PRIMARY KEY (ID)
);
	
	
CREATE TABLE RENTS (
	ID INTEGER NOT NULL, 
	BOOK_ID INTEGER NOT NULL REFERENCES USERS(ID), 
	USER_ID INTEGER NOT NULL REFERENCES BOOKS(ID), 
	START_DATE DATE NOT NULL, 
	END_DATE DATE, 
    DATE_TO_RETURN INTEGER DEFAULT 3,
	PRIMARY KEY (ID)
);

