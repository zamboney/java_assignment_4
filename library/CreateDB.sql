CREATE TABLE APP.PERMISSIONS (
	ID INTEGER NOT NULL,
	"NAME" VARCHAR(20), 
	PRIMARY KEY (ID)
);

INSERT INTO APP.PERMISSIONS (ID, "NAME") 
	VALUES (1, 'READ');
INSERT INTO APP.PERMISSIONS (ID, "NAME") 
	VALUES (2, 'RENT');
INSERT INTO APP.PERMISSIONS (ID, "NAME") 
	VALUES (3, 'ADMIN');

CREATE TABLE APP.USERS (
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
	FNAME VARCHAR(20) NOT NULL, 
	LNAME VARCHAR(20) NOT NULL, 
        IS_DELETED BOOLEAN DEFAULT FALSE NOT NULL,
	PREMISSION_ID INTEGER DEFAULT 1  NOT NULL REFERENCES PERMISSIONS(ID), 
	PENALTY DOUBLE DEFAULT 0  NOT NULL, 
	PASSWORD VARCHAR(20) DEFAULT '123456'  NOT NULL, 
	USER_NAME VARCHAR(20) NOT NULL UNIQUE, 
	PRIMARY KEY (ID)
);

INSERT INTO APP.USERS (FNAME, LNAME, PREMISSION_ID, PENALTY, PASSWORD, USER_NAME, IS_DELETED) 
	VALUES ('admin', 'admin', 3, 0.0, '123456', 'admin', false);
INSERT INTO APP.USERS (FNAME, LNAME, PREMISSION_ID, PENALTY, PASSWORD, USER_NAME, IS_DELETED) 
	VALUES ('reader', 'reader', 2, 0.0, '123456', 'reader', false);
INSERT INTO APP.USERS (FNAME, LNAME, PREMISSION_ID, PENALTY, PASSWORD, USER_NAME, IS_DELETED) 
	VALUES ('viewer', 'viewer', 1, 0.0, '123456', 'viewer', false);
INSERT INTO APP.USERS (FNAME, LNAME, PREMISSION_ID, PENALTY, PASSWORD, USER_NAME, IS_DELETED) 
	VALUES ('aaaaaa', 'aaaaaaa', 2, 0.0, '123456', 'aaaaaa', false);



CREATE TABLE APP.GENRES (
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
	"NAME" VARCHAR(20) NOT NULL,
	PRIMARY KEY (ID)
);
INSERT INTO APP.GENRES ("NAME") 
	VALUES ('LAW');
INSERT INTO APP.GENRES ("NAME") 
	VALUES ('COMPUTER SCIENCE');

CREATE TABLE APP.CONDITIONS (
	ID INTEGER NOT NULL, 
	"NAME" VARCHAR(20) NOT NULL, 
	PRIMARY KEY (ID)
);

INSERT INTO APP.CONDITIONS (ID,"NAME") 
	VALUES (3,'NOT IN USE');
INSERT INTO APP.CONDITIONS (ID,"NAME") 
	VALUES (2,'BAD');
INSERT INTO APP.CONDITIONS (ID,"NAME") 
	VALUES (1,'GOOD');

CREATE TABLE APP.BOOKS (
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),  
	"NAME" VARCHAR(20), 
	AUTHOR VARCHAR(20), 
	CONDITION_ID INTEGER NOT NULL REFERENCES CONDITIONS(ID),
	GENRE_ID INTEGER NOT NULL REFERENCES GENRES(ID),
	PRIMARY KEY (ID)
);
	
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('Math', 'Math', 3, 1);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('Math', 'Math', 1, 1);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('Math', 'Math', 1, 1);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('Math', 'Math', 1, 1);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('Math', 'Math', 1, 1);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('Math', 'Math', 1, 1);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('Math', 'Math', 1, 1);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('LAW', 'LAW', 3, 1);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('MATH2', 'MATH', 1, 2);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('MATH2', 'MATH', 1, 2);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('MATH2', 'MATH', 1, 2);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('MATH2', 'MATH', 1, 2);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('MATH2', 'MATH', 1, 2);
INSERT INTO APP.BOOKS ("NAME", AUTHOR, CONDITION_ID, GENRE_ID) 
	VALUES ('LAW2', 'LAW', 2, 1);


	
CREATE TABLE RENTS (
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
	BOOK_ID INTEGER NOT NULL REFERENCES BOOKS(ID), 
	USER_ID INTEGER NOT NULL REFERENCES USERS(ID), 
	START_DATE DATE NOT NULL, 
	END_DATE DATE DEFAULT NULL, 
    DATE_TO_RETURN INTEGER DEFAULT 3,
	PRIMARY KEY (ID)
);


INSERT INTO APP.RENTS (BOOK_ID,USER_ID,START_DATE,END_DATE)
    VALUES (1,1,CURRENT_DATE,CURRENT_DATE)
INSERT INTO APP.RENTS (BOOK_ID,USER_ID,START_DATE,END_DATE)
    VALUES (1,1,CURRENT_DATE,NULL)



INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (8, 1, '2017-02-07', '2017-02-08', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (1, 1, '2017-02-07', '2017-02-08', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (2, 1, '2017-02-07', '2017-02-08', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (3, 1, '2017-02-07', '2017-02-08', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (4, 1, '2017-02-07', '2017-02-08', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (5, 1, '2017-02-07', '2017-02-08', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (6, 1, '2017-02-07', '2017-02-08', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (14, 1, '2017-02-07', '2017-02-08', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (8, 1, '2017-02-08', '2017-02-08', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (8, 1, '2017-02-09', '2017-02-09', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (8, 1, '2017-02-09', '2017-02-09', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (1, 1, '2017-02-09', '2017-02-09', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (1, 7, '2017-02-09', '2017-02-09', 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (2, 1, '2017-02-09', NULL, 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (9, 1, '2017-02-09', NULL, 3);
INSERT INTO APP.RENTS (BOOK_ID, USER_ID, START_DATE, END_DATE, DATE_TO_RETURN) 
	VALUES (14, 1, '2017-02-09', NULL, 3);
